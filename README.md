# ImageServer

## Описание
Сервер изображений, предназначенный для работы в паре с AIFrames - фоторамкой с генерацией изображений.
Фоторамка сделана на основе оригинального 
проекта ["Фоторамка с нейросетью"](https://github.com/AlexGyver/AiFrame ) Гайвера.
Аппаратная часть точно такая же. 
Прошивка - альтернативная [AiFrame ForImageServer](https://github.com/maxifly/AiFrameForImageServer).


## Принцип работы

### Запрос изображения
Со стороны рамки запрашивается, а сервер отдаёт изображение. Сервер поддерживает работу с внешними по отношению к нему провайдерами изображений.
Изображения, полученные от провайдера сохраняются на диске. Максимальное количество хранимых изображений задаётся параметром, 
при достижении порога часть самых старых изображений удаляется (сколько изображений необходимо оставить задаётся параметром)

При запросе изображения сервер обращается к внешнему провайдеру только если с прошлого обращения прошло не меньше заданного количества минут.
В противном случае сервер берёт случайное изображение из сохранённых на диске.

Исключение составляют запросы, в которых явно указано обратиься к провайдеру.

На сервере указны параметры экрана рамки. Полученное со стороны внешнего провайдера изображение масштабируется под этот размер.

### Работа с промптами
Сервер хранит несколько промптов (10). При решении отправить запрос провайдеру из списка выбирается случайный промпт.
Новый промпт добавляется либо REST-запросом, либо редактированием конфига с сохранёнными промптами и перезапуском сервера.
При превышении количества промтов порогового значения - удаляется самый старый.

Так же есть возможность отправить на сервер запрос с текстом промпта. В этом случае генерируется изображение именно с этим промптом.
Промпт считается временным и в список промптов не сохраняется.

### Работа с провайдерами
Существует возможность дописать адаптеры к своим провайдерам. Адаптер должен поддерживать интерфейс ***ImageProvider*** (можно найти в коде)
Провайдер, к которому уйдёт запрос выбирается случайно.
В настоящий момент адаптер написан только к YandexArt.

## Конфигурационные файлы
TODO

## Установка и запуск
TODO

## Поддерживаемые запросы
TODO

## Дополнительная информация
TODO
### YandexArt


